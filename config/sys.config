%% -*- erlang -*-

[{kernel,
  [{logger_level, debug},
   {logger,
    [{handler,
      default,
      logger_std_h,
      #{level => debug,
        filters => [],
        formatter =>
          {logger_formatter,
           #{single_line => true,
             legacy_header => false,
             template => [time, " ", level, " [", mfa, "] ", msg, "\n"]}},
        config => #{file => "timetracker.log"}}}]}]},
 {timetracker,
  [%%
   %% Seconds of inactivity to consider you to be "not working"
   {inactivity_threshold_secs, 180},
   %%
   %% How often to poll input sources
   {activity_check_interval_ms, 1000},
   %%
   %% How long is a work day
   {workday_length_secs, 28800},
   %%
   %% Minimum time between popups saying you have worked enough
   {min_notification_interval_secs, 600},
   %%
   %% Where to save things
   {save_dir, "/tmp/timetracker"},
   %%
   %% How to display a popup. This string will be passed to
   %% io_lib:format/2 and receive the message as a string.
   %%
   %% {display_dialog_fmt, "xmessage -center -timeout 30 '~s'"},
   %% {display_dialog_fmt, "notify-send '~s'"},
   {display_dialog_fmt,
    "zenity --title 'Timetracker' --timeout=30 --warning --no-wrap --text '~s'"},
   %%
   %% Input sources. You might need to change these.
   {sources,
    [{tt_xinput_source, kbd, [11]},
     {tt_xinput_source, mouse, [14]},
     {tt_video_source, webcam, []}]}]}].
